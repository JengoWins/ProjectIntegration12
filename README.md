# ProjectIntegration12
Система учета клиентов по аренде книг

## Подготовка к загрузке БД
Проект сделан с привязкой СУБД PostgreSQL. В папке DataBase хранится один файлик с таблицами. 
Для того, чтобы загрузить эти табличке, обратитесь к этому гайду: https://vverh.digital/blog/pgadmin-backup-and-restore/

Если коротко. В pgAdmin4 создаем базу данных с именем Library, а следом тыкаем правой кнопкой мыши по БДи нажимаем Restore
Дальше достаточно выбрать файл и загрузить. Должен в логгировании pgAdmin4 дать два зеленых флага.

## Запуск проекта
Для запуска проекта, достаточно открыть его, открыв файл WebAPILibragy.sln внутри WebAPILibragy.
Как откроется проект, необходимо его запустить, нажав на кнопку старта (зеленый треугольник с надписью https)
Для проверки работоспособности, можно использовать этот путь - https://localhost:7154/Account/TEST429
https://localhost:7154 - это локальный сервер бэкенда

По идее, для тестирования должен открыться swagger в браузере, чтобы просмотреть, как работают рычаги https://localhost:7154/swagger/index.html

UPD:
В классе DBConnect, в строке optionsBuilder.UseNpgsql(), ввести свои параметры подключения к БД


## Описание путей

| Название                                  | Описание                                                                   |
|-------------------------------------------|----------------------------------------------------------------------------|
| /Account/Autorization	                    | Авторизация в системе. Необходимо для работы некоторых API                 |
| /Account/TEST429                          | Штука, что тестит лимит запрос (максимум 20 при ограничении 120 секунд)    |
| /Library/v1/GetBooks                      | Выдает все книги                                                           |
| /Library/v1/GetBooks/{count_list}{include}| Выдает книги по кол-во страниц. include дает возможность добавить параметры|
|                                           | include имеет ограничение: 1.Фамилия автора 2. Имя книги 3. Жанр           |
| /Library/v1/GetBooks/{name}	            | Выдает ключ по имени книги. Используется внутри /Loans/v2/create           |
| /Library/v1/GetBooks/{limit}{offset}	    | Вывод определенное кол-во книг. Паггинация                                 |
| /Library/v1/CreateBook	                | Создание новой книги                                                       |
| /Library/v1/UpdateBook                    | Обновление книги                                                           |
| /Library/v1/DeleteBook                    | Удаление книги                                                             |
| /Loans/v2	                                | Вывод всех данных системы учета, связка клиентов и книг, которые они заняли|
| /Loans/v2/{filter}{category}	            | Вывод по фильтру и категорию. Категории имеют 2 вида: Фамилия или Статус.  |
|                                           | В качество фильтра выступает текст. В качестве категории RadioButton       |
| /Loans/v2/create	                        | Создание нового учета по книге                                             |
| /Loans/v2/update                          | Обновление учета по книге                                                  |
| /Loans/v2/delete                          | Удаление учета по книге                                                    |
| /Readers/v1	                            | Вывод всех клиентов, которые подали заявки                                 |
| /Readers/v1/{name}	                    | Выбор клиента по Фамилии                                                   |
| /Readers/v1/add	                        | Добавление клиента в базу                                                  |
| /Readers/v1/update	                    | Обновление клиента в базу                                                  |
| /Readers/v1/delete	                    | Удаление данных клиента с базы                                             |



